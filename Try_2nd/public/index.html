<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>生成扫码发布二维码 - 小红书</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif; padding: 24px; max-width: 720px; margin: 0 auto; }
    .row { margin: 12px 0; }
    label { display: block; margin-bottom: 6px; color: #333; }
    input { width: 100%; padding: 10px 12px; border: 1px solid #ddd; border-radius: 8px; }
    button { background: #ff2442; color: #fff; padding: 10px 16px; border: 0; border-radius: 8px; cursor: pointer; }
    #qr { margin-top: 16px; display: grid; place-items: center; }
    .tips { color: #666; font-size: 14px; }
    .link { margin-top: 12px; word-break: break-all; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
  <h2>生成“扫码后打开小红书发布页”的二维码</h2>
  <form id="form">
    <div class="row">
      <label for="img">图片直链 URL</label>
      <input id="img" name="img" placeholder="https://example.com/image.jpg" required />
      <div class="tips">建议使用 HTTPS 直链，移动端能直接访问下载。</div>
    </div>
    <div class="row">
      <label for="name">素材名（可选）</label>
      <input id="name" name="name" placeholder="用于在素材中心标识" />
    </div>
    <div class="row">
      <button type="submit">生成二维码</button>
    </div>
  </form>

  <div id="qr"></div>
  <div class="link" id="link"></div>

  <script>
    const form = document.getElementById('form');
    const qrDiv = document.getElementById('qr');
    const linkDiv = document.getElementById('link');

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const img = document.getElementById('img').value.trim();
      const name = document.getElementById('name').value.trim();
      if (!img) return alert('请填写图片直链 URL');
      const params = new URLSearchParams({ img });
      if (name) params.set('name', name);
      const url = `${location.origin}/r?${params.toString()}`;
      qrDiv.innerHTML = '';
      QRCode.toCanvas(url, { width: 260 }, function(err, canvas){
        if (err) { alert('二维码生成失败: ' + err.message); return; }
        qrDiv.appendChild(canvas);
      });
      linkDiv.textContent = url;
    });
  </script>
</body>
<html>


